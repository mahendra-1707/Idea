<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Internship Roadmap Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
      font-family: 'Space Grotesk', sans-serif;
    }
    
    .gradient-bg {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
    }
    
    .card-glass {
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    .task-item {
      transition: all 0.3s ease;
    }
    
    .task-item:hover {
      transform: translateX(4px);
    }
    
    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .pulse-dot {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .domain-card {
      transition: all 0.3s ease;
    }
    
    .domain-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);
    }
    
    .week-tab {
      transition: all 0.2s ease;
    }
    
    .week-tab.active {
      background: rgba(59, 130, 246, 0.2);
      border-color: #3b82f6;
    }
    
    input:focus, select:focus {
      outline: none;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
    }
    
    .checkbox-custom {
      appearance: none;
      width: 24px;
      height: 24px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .checkbox-custom:checked {
      background: #22c55e;
      border-color: #22c55e;
    }
    
    .checkbox-custom:checked::after {
      content: '‚úì';
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full gradient-bg text-white overflow-auto">
  <div id="app" class="min-h-full w-full"><!-- Login/Signup Screen -->
   <div id="auth-screen" class="min-h-full flex items-center justify-center p-4">
    <div class="card-glass rounded-2xl p-8 w-full max-w-md fade-in">
     <div class="text-center mb-8">
      <div class="w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
       <svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
       </svg>
      </div>
      <h1 id="app-title" class="text-2xl font-bold mb-2">Internship Roadmap</h1>
      <p id="welcome-text" class="text-gray-400 text-sm">Your path to landing that dream internship</p>
     </div>
     <div id="auth-tabs" class="flex mb-6 bg-slate-800/50 rounded-lg p-1"><button onclick="showAuthTab('login')" id="login-tab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all bg-blue-600">Login</button> <button onclick="showAuthTab('signup')" id="signup-tab" class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all">Sign Up</button>
     </div>
     <form id="auth-form" onsubmit="handleAuth(event)">
      <div class="space-y-4">
       <div><label class="block text-sm text-gray-400 mb-2">Username</label> <input type="text" id="username-input" required minlength="3" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-gray-500" placeholder="Enter your username">
       </div>
       <div><label class="block text-sm text-gray-400 mb-2">Password</label> <input type="password" id="password-input" required minlength="4" class="w-full bg-slate-800/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-gray-500" placeholder="Enter your password">
       </div>
      </div><button type="submit" id="auth-submit-btn" class="w-full btn-primary text-white font-semibold py-3 px-6 rounded-lg mt-6"> Login </button>
      <p id="auth-error" class="text-red-400 text-sm mt-4 text-center hidden"></p>
     </form>
     <p class="text-gray-500 text-xs text-center mt-6">üéì Built for first-year engineering students</p>
    </div>
   </div><!-- Domain Selection Screen -->
   <div id="domain-screen" class="min-h-full p-4 hidden">
    <div class="max-w-4xl mx-auto py-8">
     <div class="text-center mb-10 fade-in">
      <h2 class="text-3xl font-bold mb-3">Choose Your Path</h2>
      <p class="text-gray-400">Select the career domain you want to pursue</p>
     </div>
     <div id="domain-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6"><!-- Domain cards will be rendered here -->
     </div>
    </div>
   </div><!-- Dashboard Screen -->
   <div id="dashboard-screen" class="min-h-full hidden"><!-- Header -->
    <header class="card-glass border-b border-slate-700/50 px-4 py-4">
     <div class="max-w-6xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-3">
       <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
        </svg>
       </div>
       <div>
        <h1 id="dashboard-title" class="font-semibold">Internship Roadmap</h1>
        <p id="user-domain" class="text-xs text-gray-400">Web Development</p>
       </div>
      </div>
      <div class="flex items-center gap-4"><button onclick="changeDomain()" class="flex items-center gap-2 text-sm text-gray-400 hover:text-white transition-colors" title="Change Career Path">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" />
        </svg><span class="hidden md:inline">Change Path</span> </button> <span id="username-display" class="text-sm text-gray-400">üë§ Student</span> <button onclick="handleLogout()" class="text-sm text-gray-400 hover:text-white transition-colors"> Logout </button>
      </div>
     </div>
    </header><!-- Main Content -->
    <main class="max-w-6xl mx-auto p-4 space-y-6"><!-- Progress Overview -->
     <section class="card-glass rounded-2xl p-6 fade-in">
      <div class="flex flex-col md:flex-row items-center gap-6"><!-- Progress Ring -->
       <div class="relative">
        <svg class="w-32 h-32 progress-ring"><circle cx="64" cy="64" r="56" stroke="rgba(255,255,255,0.1)" stroke-width="8" fill="none" /> <circle id="progress-circle" cx="64" cy="64" r="56" stroke="#3b82f6" stroke-width="8" fill="none" stroke-linecap="round" stroke-dasharray="352" stroke-dashoffset="352" />
        </svg>
        <div class="absolute inset-0 flex items-center justify-center"><span id="progress-percent" class="text-3xl font-bold">0%</span>
        </div>
       </div><!-- Stats -->
       <div class="flex-1 grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
        <div class="text-center p-4 bg-slate-800/30 rounded-xl">
         <p class="text-2xl font-bold text-green-400" id="completed-count">0</p>
         <p class="text-xs text-gray-400">Completed</p>
        </div>
        <div class="text-center p-4 bg-slate-800/30 rounded-xl">
         <p class="text-2xl font-bold text-yellow-400" id="pending-count">0</p>
         <p class="text-xs text-gray-400">Pending</p>
        </div>
        <div class="text-center p-4 bg-slate-800/30 rounded-xl">
         <p class="text-2xl font-bold text-blue-400" id="current-week">1</p>
         <p class="text-xs text-gray-400">Current Week</p>
        </div>
        <div class="text-center p-4 bg-slate-800/30 rounded-xl">
         <p class="text-2xl font-bold text-purple-400" id="streak-count">0</p>
         <p class="text-xs text-gray-400">Day Streak üî•</p>
        </div>
       </div>
      </div>
     </section><!-- Week Tabs -->
     <section class="flex gap-2 overflow-x-auto pb-2"><button onclick="selectWeek(1)" class="week-tab active flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 1</button> <button onclick="selectWeek(2)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 2</button> <button onclick="selectWeek(3)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 3</button> <button onclick="selectWeek(4)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 4</button> <button onclick="selectWeek(5)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 5</button> <button onclick="selectWeek(6)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 6</button> <button onclick="selectWeek(7)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 7</button> <button onclick="selectWeek(8)" class="week-tab flex-shrink-0 px-4 py-2 rounded-lg border border-slate-600 text-sm font-medium">Week 8</button>
     </section><!-- Tasks List -->
     <section class="card-glass rounded-2xl p-6">
      <div class="flex items-center justify-between mb-6">
       <h3 class="font-semibold text-lg">üìã Week <span id="selected-week-num">1</span> Tasks</h3>
       <div class="flex items-center gap-2 text-sm"><span class="pulse-dot w-2 h-2 rounded-full bg-green-400"></span> <span class="text-gray-400" id="week-progress">0/0 completed</span>
       </div>
      </div>
      <div id="tasks-container" class="space-y-3"><!-- Tasks will be rendered here -->
      </div>
      <div id="loading-tasks" class="text-center py-8 text-gray-400">
       <div class="animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"></div> Loading tasks...
      </div>
     </section><!-- Certificates Section -->
     <section class="card-glass rounded-2xl p-6">
      <h3 class="font-semibold text-lg mb-4">üèÜ Recommended Certificates</h3>
      <div id="certificates-container" class="grid grid-cols-1 md:grid-cols-2 gap-4"><!-- Certificates will be rendered here -->
      </div>
     </section><!-- Daily Check-in -->
     <section class="card-glass rounded-2xl p-6">
      <h3 class="font-semibold text-lg mb-4">‚úÖ Daily Consistency Check</h3>
      <div class="flex flex-wrap gap-2" id="daily-checkin"><!-- Daily check-in boxes -->
      </div>
      <p class="text-xs text-gray-500 mt-4">Mark your daily progress to build consistency</p>
     </section>
    </main>
   </div>
  </div>
  <script>
    // ============ CONFIG & STATE ============
    const defaultConfig = {
      app_title: 'Internship Roadmap',
      welcome_message: 'Your path to landing that dream internship',
      background_color: '#0f172a',
      surface_color: '#1e293b',
      text_color: '#ffffff',
      primary_action_color: '#3b82f6',
      secondary_action_color: '#22c55e'
    };

    let currentUser = null;
    let currentDomain = null;
    let selectedWeek = 1;
    let allUserData = [];
    let authMode = 'login';
    let isProcessing = false;

    // ============ CAREER DOMAINS DATA ============
    const careerDomains = {
      'web-development': {
        name: 'Web Development',
        icon: 'üåê',
        description: 'Build modern websites and web applications',
        color: 'from-blue-500 to-cyan-500',
        certificates: [
          { name: 'Meta Front-End Developer', provider: 'Coursera', duration: '7 months', link: '#' },
          { name: 'JavaScript Algorithms', provider: 'freeCodeCamp', duration: '300 hours', link: '#' },
          { name: 'React Developer', provider: 'Udemy', duration: '40 hours', link: '#' }
        ],
        roadmap: [
          { week: 1, tasks: [
            { id: 'w1-1', title: 'Learn HTML basics - structure, tags, attributes', type: 'learning' },
            { id: 'w1-2', title: 'Practice: Build a simple portfolio page', type: 'project' },
            { id: 'w1-3', title: 'Watch HTML crash course (2 hours)', type: 'video' }
          ]},
          { week: 2, tasks: [
            { id: 'w2-1', title: 'Learn CSS fundamentals - selectors, box model', type: 'learning' },
            { id: 'w2-2', title: 'Practice: Style your portfolio page', type: 'project' },
            { id: 'w2-3', title: 'Learn Flexbox layout', type: 'learning' }
          ]},
          { week: 3, tasks: [
            { id: 'w3-1', title: 'CSS Grid and responsive design', type: 'learning' },
            { id: 'w3-2', title: 'Build a responsive landing page', type: 'project' },
            { id: 'w3-3', title: 'Introduction to JavaScript', type: 'learning' }
          ]},
          { week: 4, tasks: [
            { id: 'w4-1', title: 'JavaScript variables, functions, loops', type: 'learning' },
            { id: 'w4-2', title: 'DOM manipulation basics', type: 'learning' },
            { id: 'w4-3', title: 'Build an interactive to-do list', type: 'project' }
          ]},
          { week: 5, tasks: [
            { id: 'w5-1', title: 'JavaScript ES6+ features', type: 'learning' },
            { id: 'w5-2', title: 'Async JavaScript - Promises, fetch API', type: 'learning' },
            { id: 'w5-3', title: 'Build a weather app using API', type: 'project' }
          ]},
          { week: 6, tasks: [
            { id: 'w6-1', title: 'Introduction to React.js', type: 'learning' },
            { id: 'w6-2', title: 'Components, props, and state', type: 'learning' },
            { id: 'w6-3', title: 'Build a simple React app', type: 'project' }
          ]},
          { week: 7, tasks: [
            { id: 'w7-1', title: 'Git and GitHub basics', type: 'learning' },
            { id: 'w7-2', title: 'Deploy projects to GitHub Pages', type: 'project' },
            { id: 'w7-3', title: 'Build and deploy portfolio v2', type: 'project' }
          ]},
          { week: 8, tasks: [
            { id: 'w8-1', title: 'Update LinkedIn with projects', type: 'career' },
            { id: 'w8-2', title: 'Apply to 5 internships', type: 'career' },
            { id: 'w8-3', title: 'Practice coding interview questions', type: 'learning' }
          ]}
        ]
      },
      'data-science': {
        name: 'Data Science',
        icon: 'üìä',
        description: 'Analyze data and build ML models',
        color: 'from-purple-500 to-pink-500',
        certificates: [
          { name: 'IBM Data Science', provider: 'Coursera', duration: '10 months', link: '#' },
          { name: 'Python for Data Science', provider: 'DataCamp', duration: '4 months', link: '#' },
          { name: 'Machine Learning Specialization', provider: 'Stanford Online', duration: '3 months', link: '#' }
        ],
        roadmap: [
          { week: 1, tasks: [
            { id: 'ds-w1-1', title: 'Python basics - variables, data types', type: 'learning' },
            { id: 'ds-w1-2', title: 'Practice Python on HackerRank', type: 'project' },
            { id: 'ds-w1-3', title: 'Install Jupyter Notebook', type: 'setup' }
          ]},
          { week: 2, tasks: [
            { id: 'ds-w2-1', title: 'NumPy fundamentals', type: 'learning' },
            { id: 'ds-w2-2', title: 'Pandas for data manipulation', type: 'learning' },
            { id: 'ds-w2-3', title: 'Clean a real dataset', type: 'project' }
          ]},
          { week: 3, tasks: [
            { id: 'ds-w3-1', title: 'Data visualization with Matplotlib', type: 'learning' },
            { id: 'ds-w3-2', title: 'Seaborn for statistical plots', type: 'learning' },
            { id: 'ds-w3-3', title: 'Create EDA notebook', type: 'project' }
          ]},
          { week: 4, tasks: [
            { id: 'ds-w4-1', title: 'Statistics fundamentals', type: 'learning' },
            { id: 'ds-w4-2', title: 'Probability and distributions', type: 'learning' },
            { id: 'ds-w4-3', title: 'Statistical analysis project', type: 'project' }
          ]},
          { week: 5, tasks: [
            { id: 'ds-w5-1', title: 'Introduction to Machine Learning', type: 'learning' },
            { id: 'ds-w5-2', title: 'Scikit-learn basics', type: 'learning' },
            { id: 'ds-w5-3', title: 'Build first ML model', type: 'project' }
          ]},
          { week: 6, tasks: [
            { id: 'ds-w6-1', title: 'Supervised learning algorithms', type: 'learning' },
            { id: 'ds-w6-2', title: 'Model evaluation metrics', type: 'learning' },
            { id: 'ds-w6-3', title: 'Kaggle competition entry', type: 'project' }
          ]},
          { week: 7, tasks: [
            { id: 'ds-w7-1', title: 'SQL for data analysis', type: 'learning' },
            { id: 'ds-w7-2', title: 'Working with databases', type: 'learning' },
            { id: 'ds-w7-3', title: 'Complete SQL exercises', type: 'project' }
          ]},
          { week: 8, tasks: [
            { id: 'ds-w8-1', title: 'Build portfolio with 3 projects', type: 'career' },
            { id: 'ds-w8-2', title: 'Update GitHub profile', type: 'career' },
            { id: 'ds-w8-3', title: 'Apply to data science internships', type: 'career' }
          ]}
        ]
      },
      'mobile-development': {
        name: 'Mobile Development',
        icon: 'üì±',
        description: 'Create iOS and Android applications',
        color: 'from-green-500 to-emerald-500',
        certificates: [
          { name: 'Meta React Native', provider: 'Coursera', duration: '6 months', link: '#' },
          { name: 'Flutter Development', provider: 'Udemy', duration: '30 hours', link: '#' },
          { name: 'Android Basics', provider: 'Google', duration: '3 months', link: '#' }
        ],
        roadmap: [
          { week: 1, tasks: [
            { id: 'mob-w1-1', title: 'Choose framework: React Native or Flutter', type: 'learning' },
            { id: 'mob-w1-2', title: 'Set up development environment', type: 'setup' },
            { id: 'mob-w1-3', title: 'Run your first app', type: 'project' }
          ]},
          { week: 2, tasks: [
            { id: 'mob-w2-1', title: 'Learn components and layouts', type: 'learning' },
            { id: 'mob-w2-2', title: 'Styling in mobile apps', type: 'learning' },
            { id: 'mob-w2-3', title: 'Build a profile card UI', type: 'project' }
          ]},
          { week: 3, tasks: [
            { id: 'mob-w3-1', title: 'Navigation between screens', type: 'learning' },
            { id: 'mob-w3-2', title: 'State management basics', type: 'learning' },
            { id: 'mob-w3-3', title: 'Multi-screen app project', type: 'project' }
          ]},
          { week: 4, tasks: [
            { id: 'mob-w4-1', title: 'Working with APIs', type: 'learning' },
            { id: 'mob-w4-2', title: 'Handling user input', type: 'learning' },
            { id: 'mob-w4-3', title: 'Build a news reader app', type: 'project' }
          ]},
          { week: 5, tasks: [
            { id: 'mob-w5-1', title: 'Local data storage', type: 'learning' },
            { id: 'mob-w5-2', title: 'Authentication basics', type: 'learning' },
            { id: 'mob-w5-3', title: 'Add login to your app', type: 'project' }
          ]},
          { week: 6, tasks: [
            { id: 'mob-w6-1', title: 'Push notifications', type: 'learning' },
            { id: 'mob-w6-2', title: 'App performance optimization', type: 'learning' },
            { id: 'mob-w6-3', title: 'Optimize existing projects', type: 'project' }
          ]},
          { week: 7, tasks: [
            { id: 'mob-w7-1', title: 'Publishing to app stores', type: 'learning' },
            { id: 'mob-w7-2', title: 'App store guidelines', type: 'learning' },
            { id: 'mob-w7-3', title: 'Prepare app for submission', type: 'project' }
          ]},
          { week: 8, tasks: [
            { id: 'mob-w8-1', title: 'Polish portfolio app', type: 'career' },
            { id: 'mob-w8-2', title: 'Create demo videos', type: 'career' },
            { id: 'mob-w8-3', title: 'Apply to mobile dev internships', type: 'career' }
          ]}
        ]
      },
      'cloud-devops': {
        name: 'Cloud & DevOps',
        icon: '‚òÅÔ∏è',
        description: 'Master cloud platforms and automation',
        color: 'from-orange-500 to-yellow-500',
        certificates: [
          { name: 'AWS Cloud Practitioner', provider: 'Amazon', duration: '2 months', link: '#' },
          { name: 'Docker Mastery', provider: 'Udemy', duration: '20 hours', link: '#' },
          { name: 'Kubernetes Basics', provider: 'Linux Foundation', duration: '1 month', link: '#' }
        ],
        roadmap: [
          { week: 1, tasks: [
            { id: 'cloud-w1-1', title: 'Linux command line basics', type: 'learning' },
            { id: 'cloud-w1-2', title: 'Practice terminal commands', type: 'project' },
            { id: 'cloud-w1-3', title: 'Set up Linux environment', type: 'setup' }
          ]},
          { week: 2, tasks: [
            { id: 'cloud-w2-1', title: 'Introduction to cloud computing', type: 'learning' },
            { id: 'cloud-w2-2', title: 'AWS free tier setup', type: 'setup' },
            { id: 'cloud-w2-3', title: 'Deploy first EC2 instance', type: 'project' }
          ]},
          { week: 3, tasks: [
            { id: 'cloud-w3-1', title: 'AWS S3 and storage services', type: 'learning' },
            { id: 'cloud-w3-2', title: 'AWS IAM and security', type: 'learning' },
            { id: 'cloud-w3-3', title: 'Host static website on S3', type: 'project' }
          ]},
          { week: 4, tasks: [
            { id: 'cloud-w4-1', title: 'Docker fundamentals', type: 'learning' },
            { id: 'cloud-w4-2', title: 'Containerize an application', type: 'project' },
            { id: 'cloud-w4-3', title: 'Docker Compose basics', type: 'learning' }
          ]},
          { week: 5, tasks: [
            { id: 'cloud-w5-1', title: 'CI/CD concepts', type: 'learning' },
            { id: 'cloud-w5-2', title: 'GitHub Actions basics', type: 'learning' },
            { id: 'cloud-w5-3', title: 'Set up automated deployment', type: 'project' }
          ]},
          { week: 6, tasks: [
            { id: 'cloud-w6-1', title: 'Introduction to Kubernetes', type: 'learning' },
            { id: 'cloud-w6-2', title: 'Pods, services, deployments', type: 'learning' },
            { id: 'cloud-w6-3', title: 'Deploy app to Kubernetes', type: 'project' }
          ]},
          { week: 7, tasks: [
            { id: 'cloud-w7-1', title: 'Infrastructure as Code intro', type: 'learning' },
            { id: 'cloud-w7-2', title: 'Terraform basics', type: 'learning' },
            { id: 'cloud-w7-3', title: 'Provision infrastructure with code', type: 'project' }
          ]},
          { week: 8, tasks: [
            { id: 'cloud-w8-1', title: 'Start AWS certification prep', type: 'career' },
            { id: 'cloud-w8-2', title: 'Document projects on GitHub', type: 'career' },
            { id: 'cloud-w8-3', title: 'Apply to DevOps internships', type: 'career' }
          ]}
        ]
      }
    };

    // ============ DATA SDK HANDLER ============
    const dataHandler = {
      onDataChanged(data) {
        allUserData = data;
        if (currentUser) {
          updateDashboard();
        }
      }
    };

    // ============ ELEMENT SDK INIT ============
    async function initApp() {
      // Init Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            applyConfig(config);
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (v) => window.elementSdk.setConfig({ background_color: v })
              },
              {
                get: () => config.surface_color || defaultConfig.surface_color,
                set: (v) => window.elementSdk.setConfig({ surface_color: v })
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (v) => window.elementSdk.setConfig({ text_color: v })
              },
              {
                get: () => config.primary_action_color || defaultConfig.primary_action_color,
                set: (v) => window.elementSdk.setConfig({ primary_action_color: v })
              },
              {
                get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                set: (v) => window.elementSdk.setConfig({ secondary_action_color: v })
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ['app_title', config.app_title || defaultConfig.app_title],
            ['welcome_message', config.welcome_message || defaultConfig.welcome_message]
          ])
        });
      }

      // Init Data SDK
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize Data SDK');
        }
      }

      // Apply initial config
      applyConfig(window.elementSdk?.config || defaultConfig);
      
      // Hide loading indicator
      document.getElementById('loading-tasks').classList.add('hidden');
    }

    function applyConfig(config) {
      const bg = config.background_color || defaultConfig.background_color;
      const surface = config.surface_color || defaultConfig.surface_color;
      const text = config.text_color || defaultConfig.text_color;
      const primary = config.primary_action_color || defaultConfig.primary_action_color;
      const secondary = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.background = `linear-gradient(135deg, ${bg} 0%, ${surface} 50%, ${lightenColor(surface, 20)} 100%)`;
      document.body.style.color = text;

      document.getElementById('app-title').textContent = config.app_title || defaultConfig.app_title;
      document.getElementById('welcome-text').textContent = config.welcome_message || defaultConfig.welcome_message;
      
      const dashboardTitle = document.getElementById('dashboard-title');
      if (dashboardTitle) {
        dashboardTitle.textContent = config.app_title || defaultConfig.app_title;
      }

      // Update buttons
      document.querySelectorAll('.btn-primary').forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primary} 0%, ${darkenColor(primary, 20)} 100%)`;
      });

      // Update progress circle
      const progressCircle = document.getElementById('progress-circle');
      if (progressCircle) {
        progressCircle.setAttribute('stroke', primary);
      }
    }

    function lightenColor(color, percent) {
      const num = parseInt(color.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) + amt;
      const G = (num >> 8 & 0x00FF) + amt;
      const B = (num & 0x0000FF) + amt;
      return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
    }

    function darkenColor(color, percent) {
      const num = parseInt(color.replace('#', ''), 16);
      const amt = Math.round(2.55 * percent);
      const R = (num >> 16) - amt;
      const G = (num >> 8 & 0x00FF) - amt;
      const B = (num & 0x0000FF) - amt;
      return '#' + (0x1000000 + (R > 0 ? R : 0) * 0x10000 + (G > 0 ? G : 0) * 0x100 + (B > 0 ? B : 0)).toString(16).slice(1);
    }

    // ============ AUTH FUNCTIONS ============
    function showAuthTab(mode) {
      authMode = mode;
      const loginTab = document.getElementById('login-tab');
      const signupTab = document.getElementById('signup-tab');
      const submitBtn = document.getElementById('auth-submit-btn');

      if (mode === 'login') {
        loginTab.classList.add('bg-blue-600');
        signupTab.classList.remove('bg-blue-600');
        submitBtn.textContent = 'Login';
      } else {
        signupTab.classList.add('bg-blue-600');
        loginTab.classList.remove('bg-blue-600');
        submitBtn.textContent = 'Create Account';
      }
      
      document.getElementById('auth-error').classList.add('hidden');
    }

    async function handleAuth(event) {
      event.preventDefault();
      if (isProcessing) return;

      const username = document.getElementById('username-input').value.trim().toLowerCase();
      const password = document.getElementById('password-input').value;
      const errorEl = document.getElementById('auth-error');
      const submitBtn = document.getElementById('auth-submit-btn');

      if (!username || !password) {
        errorEl.textContent = 'Please fill in all fields';
        errorEl.classList.remove('hidden');
        return;
      }

      isProcessing = true;
      submitBtn.disabled = true;
      submitBtn.textContent = authMode === 'login' ? 'Logging in...' : 'Creating account...';

      // Simple auth simulation using local storage for demo
      // In production, this would use proper backend auth
      const storedUsers = JSON.parse(localStorage.getItem('roadmap_users') || '{}');

      if (authMode === 'signup') {
        if (storedUsers[username]) {
          errorEl.textContent = 'Username already exists';
          errorEl.classList.remove('hidden');
          submitBtn.disabled = false;
          submitBtn.textContent = 'Create Account';
          isProcessing = false;
          return;
        }
        storedUsers[username] = { password, domain: null };
        localStorage.setItem('roadmap_users', JSON.stringify(storedUsers));
        currentUser = username;
        showScreen('domain');
      } else {
        if (!storedUsers[username] || storedUsers[username].password !== password) {
          errorEl.textContent = 'Invalid username or password';
          errorEl.classList.remove('hidden');
          submitBtn.disabled = false;
          submitBtn.textContent = 'Login';
          isProcessing = false;
          return;
        }
        currentUser = username;
        currentDomain = storedUsers[username].domain;
        
        if (currentDomain) {
          showScreen('dashboard');
        } else {
          showScreen('domain');
        }
      }

      submitBtn.disabled = false;
      isProcessing = false;
    }

    function handleLogout() {
      currentUser = null;
      currentDomain = null;
      document.getElementById('username-input').value = '';
      document.getElementById('password-input').value = '';
      showScreen('auth');
    }

    function changeDomain() {
      if (!currentUser) return;
      
      // Show confirmation message
      const confirmChange = document.createElement('div');
      confirmChange.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4';
      confirmChange.innerHTML = `
        <div class="card-glass rounded-2xl p-6 max-w-md w-full fade-in">
          <h3 class="text-xl font-bold mb-3">Change Career Path?</h3>
          <p class="text-gray-400 mb-6">Your current progress will be saved. You can switch between paths anytime.</p>
          <div class="flex gap-3">
            <button onclick="this.closest('.fixed').remove()" class="flex-1 py-3 px-6 rounded-lg bg-slate-700 hover:bg-slate-600 transition-colors">
              Cancel
            </button>
            <button onclick="confirmChangeDomain()" class="flex-1 py-3 px-6 rounded-lg btn-primary">
              Continue
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(confirmChange);
    }

    function confirmChangeDomain() {
      // Remove confirmation dialog
      const dialog = document.querySelector('.fixed.inset-0');
      if (dialog) dialog.remove();
      
      // Reset domain selection
      currentDomain = null;
      selectedWeek = 1;
      
      // Update stored user
      const storedUsers = JSON.parse(localStorage.getItem('roadmap_users') || '{}');
      if (storedUsers[currentUser]) {
        storedUsers[currentUser].domain = null;
        localStorage.setItem('roadmap_users', JSON.stringify(storedUsers));
      }
      
      // Show domain selection screen
      showScreen('domain');
    }

    // ============ SCREEN NAVIGATION ============
    function showScreen(screen) {
      document.getElementById('auth-screen').classList.add('hidden');
      document.getElementById('domain-screen').classList.add('hidden');
      document.getElementById('dashboard-screen').classList.add('hidden');

      if (screen === 'auth') {
        document.getElementById('auth-screen').classList.remove('hidden');
      } else if (screen === 'domain') {
        document.getElementById('domain-screen').classList.remove('hidden');
        renderDomainCards();
      } else if (screen === 'dashboard') {
        document.getElementById('dashboard-screen').classList.remove('hidden');
        document.getElementById('username-display').textContent = 'üë§ ' + currentUser;
        updateDashboard();
      }
    }

    // ============ DOMAIN SELECTION ============
    function renderDomainCards() {
      const container = document.getElementById('domain-grid');
      container.innerHTML = '';

      Object.entries(careerDomains).forEach(([key, domain]) => {
        const card = document.createElement('div');
        card.className = `domain-card card-glass rounded-2xl p-6 cursor-pointer fade-in`;
        card.onclick = () => selectDomain(key);
        card.innerHTML = `
          <div class="w-16 h-16 rounded-2xl bg-gradient-to-br ${domain.color} flex items-center justify-center text-3xl mb-4">
            ${domain.icon}
          </div>
          <h3 class="text-xl font-bold mb-2">${domain.name}</h3>
          <p class="text-gray-400 text-sm mb-4">${domain.description}</p>
          <div class="flex items-center gap-2 text-sm text-gray-500">
            <span>üìÖ 8 weeks</span>
            <span>‚Ä¢</span>
            <span>üéØ ${domain.roadmap.reduce((sum, w) => sum + w.tasks.length, 0)} tasks</span>
          </div>
        `;
        container.appendChild(card);
      });
    }

    async function selectDomain(domainKey) {
      if (isProcessing) return;
      isProcessing = true;

      currentDomain = domainKey;
      
      // Save domain selection
      const storedUsers = JSON.parse(localStorage.getItem('roadmap_users') || '{}');
      if (storedUsers[currentUser]) {
        storedUsers[currentUser].domain = domainKey;
        localStorage.setItem('roadmap_users', JSON.stringify(storedUsers));
      }

      // Initialize tasks in Data SDK
      const domain = careerDomains[domainKey];
      const userTasks = allUserData.filter(d => d.user_id === currentUser && d.task_id);

      // Only create tasks if they don't exist
      if (userTasks.length === 0 && window.dataSdk) {
        for (const week of domain.roadmap) {
          for (const task of week.tasks) {
            if (allUserData.length >= 999) {
              showToast('Maximum data limit reached', 'error');
              break;
            }
            const result = await window.dataSdk.create({
              user_id: currentUser,
              username: currentUser,
              selected_domain: domainKey,
              task_id: task.id,
              task_title: task.title,
              task_week: week.week,
              task_type: task.type,
              completed: false,
              completed_date: null,
              created_at: new Date().toISOString()
            });
            if (!result.isOk) {
              console.error('Failed to create task');
            }
          }
        }
      }

      isProcessing = false;
      showScreen('dashboard');
    }

    // ============ DASHBOARD ============
    function updateDashboard() {
      if (!currentUser || !currentDomain) return;

      const domain = careerDomains[currentDomain];
      document.getElementById('user-domain').textContent = domain.name;

      renderTasks();
      renderCertificates();
      updateProgress();
      renderDailyCheckin();
    }

    function renderTasks() {
      const container = document.getElementById('tasks-container');
      const userTasks = allUserData.filter(d => 
        d.user_id === currentUser && 
        d.task_id && 
        d.task_week === selectedWeek
      );

      const domain = careerDomains[currentDomain];
      const weekTasks = domain.roadmap.find(w => w.week === selectedWeek)?.tasks || [];

      container.innerHTML = '';
      document.getElementById('loading-tasks').classList.add('hidden');

      if (weekTasks.length === 0) {
        container.innerHTML = '<p class="text-gray-400 text-center py-8">No tasks for this week</p>';
        return;
      }

      weekTasks.forEach(task => {
        const savedTask = userTasks.find(t => t.task_id === task.id);
        const isCompleted = savedTask?.completed || false;

        const taskEl = document.createElement('div');
        taskEl.className = `task-item flex items-center gap-4 p-4 rounded-xl ${isCompleted ? 'bg-green-500/10 border border-green-500/30' : 'bg-slate-800/30'}`;
        taskEl.dataset.taskId = task.id;
        
        const typeIcon = getTypeIcon(task.type);
        const typeBadge = getTypeBadge(task.type);

        taskEl.innerHTML = `
          <input type="checkbox" ${isCompleted ? 'checked' : ''} 
            onchange="toggleTask('${task.id}')"
            class="checkbox-custom">
          <div class="flex-1">
            <p class="${isCompleted ? 'line-through text-gray-500' : ''}">${task.title}</p>
            <span class="text-xs ${typeBadge}">${typeIcon} ${task.type}</span>
          </div>
          ${isCompleted ? '<span class="text-green-400 text-sm">‚úì Done</span>' : ''}
        `;
        container.appendChild(taskEl);
      });

      // Update week progress
      const weekCompleted = userTasks.filter(t => t.completed).length;
      document.getElementById('week-progress').textContent = `${weekCompleted}/${weekTasks.length} completed`;
      document.getElementById('selected-week-num').textContent = selectedWeek;
    }

    function getTypeIcon(type) {
      const icons = {
        'learning': 'üìö',
        'project': 'üõ†Ô∏è',
        'video': 'üé¨',
        'career': 'üíº',
        'setup': '‚öôÔ∏è'
      };
      return icons[type] || 'üìã';
    }

    function getTypeBadge(type) {
      const colors = {
        'learning': 'text-blue-400',
        'project': 'text-purple-400',
        'video': 'text-red-400',
        'career': 'text-yellow-400',
        'setup': 'text-gray-400'
      };
      return colors[type] || 'text-gray-400';
    }

    async function toggleTask(taskId) {
      if (isProcessing) return;
      
      const taskRecord = allUserData.find(d => 
        d.user_id === currentUser && d.task_id === taskId
      );

      if (!taskRecord || !window.dataSdk) return;

      isProcessing = true;

      const newCompleted = !taskRecord.completed;
      const result = await window.dataSdk.update({
        ...taskRecord,
        completed: newCompleted,
        completed_date: newCompleted ? new Date().toISOString() : null
      });

      if (!result.isOk) {
        showToast('Failed to update task', 'error');
      }

      isProcessing = false;
    }

    function selectWeek(week) {
      selectedWeek = week;
      
      document.querySelectorAll('.week-tab').forEach((tab, index) => {
        if (index + 1 === week) {
          tab.classList.add('active');
        } else {
          tab.classList.remove('active');
        }
      });

      renderTasks();
    }

    function updateProgress() {
      const userTasks = allUserData.filter(d => d.user_id === currentUser && d.task_id);
      const completed = userTasks.filter(t => t.completed).length;
      const total = userTasks.length || 1;
      const percent = Math.round((completed / total) * 100);

      document.getElementById('progress-percent').textContent = percent + '%';
      document.getElementById('completed-count').textContent = completed;
      document.getElementById('pending-count').textContent = total - completed;

      // Update progress ring
      const circle = document.getElementById('progress-circle');
      const circumference = 352;
      const offset = circumference - (percent / 100) * circumference;
      circle.style.strokeDashoffset = offset;

      // Calculate current week based on completed tasks
      const completedWeeks = {};
      userTasks.forEach(t => {
        if (t.completed) {
          completedWeeks[t.task_week] = (completedWeeks[t.task_week] || 0) + 1;
        }
      });

      let currentWeek = 1;
      for (let w = 1; w <= 8; w++) {
        const weekTasks = userTasks.filter(t => t.task_week === w);
        const weekCompleted = weekTasks.filter(t => t.completed).length;
        if (weekCompleted < weekTasks.length) {
          currentWeek = w;
          break;
        }
        currentWeek = Math.min(w + 1, 8);
      }
      document.getElementById('current-week').textContent = currentWeek;

      // Calculate streak
      const completedDates = userTasks
        .filter(t => t.completed && t.completed_date)
        .map(t => new Date(t.completed_date).toDateString());
      
      const uniqueDates = [...new Set(completedDates)].sort().reverse();
      let streak = 0;
      const today = new Date().toDateString();
      
      for (let i = 0; i < uniqueDates.length; i++) {
        const checkDate = new Date();
        checkDate.setDate(checkDate.getDate() - i);
        if (uniqueDates.includes(checkDate.toDateString())) {
          streak++;
        } else if (i > 0) {
          break;
        }
      }
      
      document.getElementById('streak-count').textContent = streak;
    }

    function renderCertificates() {
      const container = document.getElementById('certificates-container');
      const domain = careerDomains[currentDomain];
      
      container.innerHTML = '';
      
      domain.certificates.forEach(cert => {
        const certEl = document.createElement('div');
        certEl.className = 'bg-slate-800/30 rounded-xl p-4 flex items-center gap-4';
        certEl.innerHTML = `
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center text-xl">
            üèÖ
          </div>
          <div class="flex-1">
            <h4 class="font-medium">${cert.name}</h4>
            <p class="text-xs text-gray-400">${cert.provider} ‚Ä¢ ${cert.duration}</p>
          </div>
        `;
        container.appendChild(certEl);
      });
    }

    function renderDailyCheckin() {
      const container = document.getElementById('daily-checkin');
      container.innerHTML = '';

      const today = new Date();
      const userTasks = allUserData.filter(d => d.user_id === currentUser && d.task_id);

      for (let i = 6; i >= 0; i--) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        const dateStr = date.toDateString();
        
        const hasActivity = userTasks.some(t => 
          t.completed && t.completed_date && 
          new Date(t.completed_date).toDateString() === dateStr
        );

        const dayEl = document.createElement('div');
        dayEl.className = `w-10 h-10 rounded-lg flex items-center justify-center text-xs font-medium ${
          hasActivity ? 'bg-green-500' : 'bg-slate-700'
        }`;
        dayEl.title = date.toLocaleDateString();
        dayEl.textContent = date.getDate();
        container.appendChild(dayEl);
      }
    }

    // ============ TOAST NOTIFICATION ============
    function showToast(message, type = 'info') {
      const existingToast = document.querySelector('.toast-notification');
      if (existingToast) existingToast.remove();

      const toast = document.createElement('div');
      toast.className = `toast-notification fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${
        type === 'error' ? 'bg-red-500' : 'bg-blue-500'
      }`;
      toast.textContent = message;
      document.body.appendChild(toast);

      setTimeout(() => toast.remove(), 3000);
    }

    // ============ INIT ============
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9bb4d653e30547d5',t:'MTc2Nzk3MTE3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>